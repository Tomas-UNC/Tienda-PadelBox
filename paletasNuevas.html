<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paletas Nuevas - Tienda PadelBox</title>
    <link rel="stylesheet" href="../CSS/paletasNuevas.css">
    <!-- Si tienes un CSS general, agrega este tambi√©n -->
    <link rel="stylesheet" href="../CSS/styles.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="top-bar">
            <div class="container top-bar-content">
                <div>¬°Bienvenido a Tienda PadelBox!</div>
                <div>Env√≠os a todo el pa√≠s</div>
            </div>
        </div>
        
        <div class="container logo-section">
            <div class="logo">Tienda Padel<span>Box</span></div>
        </div>
        
        <nav class="main-nav">
            <div class="container">
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="index.html" class="nav-link">HOME</a>
                    </li>
                    <li class="nav-item">
                        <a href="paletas.html" class="nav-link">PALETAS</a>
                        <div class="dropdown-menu">
                            <a href="paletasNuevas.html" class="dropdown-item">Nuevas</a>
                            <a href="paletasUsadas.html" class="dropdown-item">Usadas</a>
                            <a href="paletasEncargo.html" class="dropdown-item">Encargo</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">GRIPS</a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">TUBO DE PELOTAS</a>
                        <div class="dropdown-menu">
                            <a href="#" class="dropdown-item">Remeras</a>
                            <a href="#" class="dropdown-item">Shorts</a>
                            <a href="#" class="dropdown-item">Polar</a>
                            <a href="#" class="dropdown-item">Accesorios</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">CALZADO</a>
                        <div class="dropdown-menu">
                            <a href="#" class="dropdown-item">Zapatillas de p√°del</a>
                            <a href="#" class="dropdown-item">Zapatillas de tenis</a>
                            <a href="#" class="dropdown-item">Zapatillas urbanas</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">ACCESORIOS</a>
                        <div class="dropdown-menu">
                            <a href="#" class="dropdown-item">Grips</a>
                            <a href="#" class="dropdown-item">Overgrips</a>
                            <a href="#" class="dropdown-item">Protectores</a>
                            <a href="#" class="dropdown-item">Cordajes</a>
                            <a href="#" class="dropdown-item">Pelotas</a>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Secci√≥n de Paletas Nuevas -->
    <section class="productos">
        <h2>PALETAS NUEVAS</h2>
        
        <!-- Contenedor donde se cargar√°n las paletas -->
        <div id="paletas-container" class="productos-grid">
            <!-- Las paletas se cargar√°n aqu√≠ con JavaScript -->
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>PadelBox</h3>
                    <p>Tu tienda de confianza para todo lo relacionado con el p√°del. Ofrecemos productos de calidad y asesoramiento especializado.</p>
                </div>
                <div class="footer-section">
                    <h3>Categor√≠as</h3>
                    <ul>
                        <li><a href="paletas.html">Paletas</a></li>
                        <li><a href="#">Grips</a></li>
                        <li><a href="#">Pelotas</a></li>
                        <li><a href="#">Calzado</a></li>
                        <li><a href="#">Accesorios</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Contacto</h3>
                    <ul>
                        <li>Email: info@padelbox.com</li>
                        <li>Tel√©fono: +54 11 1234-5678</li>
                        <li>Direcci√≥n: Av. P√°del 123, Buenos Aires</li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                &copy; 2024 PadelBox - Todos los derechos reservados
            </div>
        </div>
    </footer>

    <!-- JavaScript para cargar paletas -->
    <script>
        // Funci√≥n para cargar paletas NUEVAS
        async function cargarPaletasNuevas() {
            try {
                console.log('üîç Cargando paletas nuevas...');
                
                // IMPORTANTE: Verifica la ruta correcta
                const response = await fetch('/paletas.json');
                
                if (!response.ok) {
                    throw new Error(`Error HTTP: ${response.status}`);
                }
                
                const paletas = await response.json();
                console.log('üìä Paletas cargadas:', paletas);
                
                // FILTRAR solo paletas con estado "nueva" (singular, no "nuevas")
                const paletasNuevas = paletas.filter(p => 
                    p.estado === "nueva" && (p.disponible === undefined || p.disponible === true)
                );
                
                console.log('‚úÖ Paletas nuevas filtradas:', paletasNuevas);
                
                mostrarPaletas(paletasNuevas);
                
            } catch (error) {
                console.error('‚ùå Error cargando paletas:', error);
                mostrarError();
            }
        }
        
        // Funci√≥n para mostrar paletas en la p√°gina
        function mostrarPaletas(paletas) {
            const container = document.getElementById('paletas-container');
            
            if (!container) {
                console.error('‚ùå No se encontr√≥ el contenedor paletas-container');
                return;
            }
            
            container.innerHTML = '';
            
            if (!paletas || paletas.length === 0) {
                container.innerHTML = `
                    <div class="no-productos">
                        <p>üè∏ No hay paletas nuevas disponibles en este momento.</p>
                        <p>Pr√≥ximamente agregaremos m√°s productos.</p>
                    </div>
                `;
                return;
            }
            
            // Crear HTML para cada paleta
            paletas.forEach(paleta => {
                const badge = '<span class="badge nueva">NUEVA</span>';
                
                // Precio formateado
                const precio = paleta.precio ? 
                    `$${paleta.precio.toLocaleString('es-AR')}` : 
                    'Consultar';
                
                // Imagen (usar placeholder si no hay)
                const imagen = paleta.imagen || 'https://via.placeholder.com/300x200?text=Paleta+Padel';
                
                const html = `
                    <div class="producto-card">
                        ${badge}
                        <img src="${imagen}" 
                             alt="${paleta.title || 'Paleta de p√°del'}"
                             loading="lazy">
                        <div class="producto-info">
                            <h3>${paleta.title || 'Paleta sin nombre'}</h3>
                            ${paleta.marca ? `<p class="marca">${paleta.marca}</p>` : ''}
                            <p class="precio">${precio}</p>
                            ${paleta.descripcion ? `<p class="descripcion">${paleta.descripcion}</p>` : ''}
                            <button class="btn-comprar" onclick="consultarPaleta('${paleta.title || ''}', ${paleta.precio || 0})">
                                Consultar
                            </button>
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });
        }
        
        // Funci√≥n para mostrar error
        function mostrarError() {
            const container = document.getElementById('paletas-container');
            if (container) {
                container.innerHTML = `
                    <div class="no-productos">
                        <p>‚ö†Ô∏è Error al cargar las paletas.</p>
                        <p>Por favor, intenta recargar la p√°gina.</p>
                        <button onclick="cargarPaletasNuevas()" style="padding: 10px 20px; margin-top: 10px;">
                            Reintentar
                        </button>
                    </div>
                `;
            }
        }
        
        // Funci√≥n para consultar una paleta
        function consultarPaleta(nombre, precio) {
            const precioFormateado = precio ? `$${precio.toLocaleString('es-AR')}` : 'Consultar';
            
            const mensaje = `
                üéæ CONSULTA ENVIADA
                ------------------
                Producto: ${nombre}
                Precio: ${precioFormateado}
                Estado: Nueva
                
                üìû Te contactaremos pronto para brindarte m√°s informaci√≥n.
            `;
            
            alert(mensaje);
        }
        
        // Cargar paletas cuando la p√°gina est√© lista
        document.addEventListener('DOMContentLoaded', cargarPaletasNuevas);
    </script>
</body>
</html>